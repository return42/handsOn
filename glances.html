
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Glances: an eye on your system &#8212; handsOn  Dokumentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="pi-hole" href="pihole/index.html" />
    <link rel="prev" title="Gogs / Go Git Service" href="gogs.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Stichwortverzeichnis"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="pihole/index.html" title="pi-hole"
             accesskey="N">weiter</a> |</li>
        <li class="right" >
          <a href="gogs.html" title="Gogs / Go Git Service"
             accesskey="P">zurück</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">handsOn  Dokumentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Glances: an eye on your system</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="glances-an-eye-on-your-system">
<span id="xref-glances"></span><h1>Glances: an eye on your system<a class="headerlink" href="#glances-an-eye-on-your-system" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="https://nicolargo.github.io/glances/">Glances</a> ist ein Monitoring Tool dass sowohl auf der Kommandozeile als auch über
ein WEB-UI genutzt werden kann.  Es kann einzeln auf einem Host genutzt werden,
aber im Client/Server Betrieb auch im Verbund.</p>
<p>Es wird in den Ubuntu/Debian Paketen (APT), angeboten, jedoch ist diese Version
i.d.R. veraltet, weshalb hier eine Installation der WEB-UI als Dienst aus den
<a class="reference external" href="https://pypi.python.org/pypi">PyPI</a> Paketen vorgenommen wird.</p>
<p>Die hier vorgestellte Installation weist sich durch folgende besondere
Eigenschaften aus:</p>
<ul class="simple">
<li><p>Komplette Installation nach <code class="docutils literal notranslate"><span class="pre">~glances</span></code>.</p></li>
<li><p>Der Glances Server wird hinter einer (Apache-) URL
<code class="docutils literal notranslate"><span class="pre">https://&lt;hostname&gt;/glances</span></code> betrieben.</p></li>
</ul>
<p>Zur Installation existiert ein Script, das alle Setups vornimmt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ${SCRIPT_FOLDER}/glances.sh install server
</pre></div>
</div>
<p>Zur Wartung und Deinstallation bietet das Script weitere Kommandos an:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ${SCRIPT_FOLDER}/glances.sh --help
usage:
   glances.sh info
   glances.sh install    [server]
   glances.sh update     [server]
   glances.sh remove     [server]
   glances.sh activate   [server]
   glances.sh deactivate [server]
</pre></div>
</div>
<p>Im Einzelnen führt das KOmmando <code class="docutils literal notranslate"><span class="pre">install</span> <span class="pre">server</span></code> in etwa folgende Schritte
aus:</p>
<ol class="arabic">
<li><p>Es werden die minimal erforderlichen Systempakete (APT) installiert:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">virtualenv</span> <span class="n">python3</span> <span class="n">python3</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</li>
<li><p>Es wird der Benutzer <code class="docutils literal notranslate"><span class="pre">$GLANCES_USER</span></code> (<code class="docutils literal notranslate"><span class="pre">glances</span></code>) angelegt. Sein <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>
ist <code class="docutils literal notranslate"><span class="pre">/home/glances</span></code> und in diesen Ordner wird alles weitere installiert.
Hierzu gehört die Python-Umgebung (virtualenv in <code class="docutils literal notranslate"><span class="pre">~/py3</span></code>) in der die Pakete
<code class="docutils literal notranslate"><span class="pre">glances</span></code> und <code class="docutils literal notranslate"><span class="pre">bottle</span></code> installiert werden.</p></li>
<li><p>Die GLances Installation wird mit der <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">Service-Unit</a> Datei
<a class="reference external" href="https://github.com/return42/handsOn/blob/master/templates/lib/systemd/system/glances.service">/lib/systemd/system/glances.service</a>
im <a class="reference external" href="https://github.com/systemd/systemd">systemd</a> eingerichtet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">glances</span><span class="o">.</span><span class="n">service</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">systemctl</span> <span class="n">restart</span> <span class="n">glances</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>Die Ersetzungen sind:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># glances on localhost
GLANCES_PORT=61208
GLANCES_BIND=127.0.0.1

# systemd services
GLANCES_DESCRIPTION=&quot;Glances&quot;
GLANCES_SYSTEMD_UNIT=/lib/systemd/system/glances.service
GLANCES_USER=glances
GLANCES_HOME=/home/${GLANCES_USER}
</pre></div>
</div>
</li>
<li><p>Apache Site <a class="reference external" href="https://github.com/return42/handsOn/blob/master/templates/etc/apache2/sites-available/glances.conf">/etc/apache2/sites-available/glances.conf</a> mit <a class="reference external" href="http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#ProxyPass">ProxyPass</a>
einrichten. Ersetzungen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Apache Redirect</span>
<span class="n">GLANCES_APACHE_URL</span><span class="o">=</span><span class="s2">&quot;/glances&quot;</span>
<span class="n">GLANCES_APACHE_SITE</span><span class="o">=</span><span class="n">glances</span>
</pre></div>
</div>
<p>Proxy und glances.conf aktivieren:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">a2enmod</span> <span class="n">proxy_http</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">a2ensite</span> <span class="o">-</span><span class="n">q</span> <span class="n">glances</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">apachectl</span> <span class="n">configtest</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">H</span> <span class="n">service</span> <span class="n">apache2</span> <span class="n">force</span><span class="o">-</span><span class="n">reload</span>
</pre></div>
</div>
</li>
</ol>
<p>Damit ist der Dienst (Glances WEB-UI) eingerichtet, er kann über die URL
<a class="reference external" href="https://myhostname/glances">https://myhostname/glances</a> erreicht werden.  Die Refresh-Rate kann in Sekunden
angegeben werden (default 10).  Um z.B. alle 3 Sekunden zu aktualisieren:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--&gt;</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">myhostname</span><span class="o">/</span><span class="n">glances</span><span class="o">/</span><span class="mi">3</span>
</pre></div>
</div>
<p>Die Spalten mit den Prozessen können sortiert werden, dazu mit der Maus auf
z.B. ‚CPU‘ oder ‚MEM%‘ klicken (nicht alle Spalten können sortiert werden).  Es
ist auch möglich eine Steuerung über die Tastatur vorzunehmen, eine Übersicht
gbt es mit der Taste ‚h‘ (dazu mit der Maus vorher einmal in das Browser-Fenster
klicken um es zu aktivieren).</p>
<p>Für die Installation der Sensoren empfiehlt sich die Installation der Hardware
Tools (aber nicht auf einem V-Server):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo -H ${SCRIPT_FOLDER}/ubuntu_install_pkgs.sh hwTools
</pre></div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/darmarIT_logo_128.png" alt="Logo"/>
            </a></p>
  
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="gogs.html" title="vorheriges Kapitel">Gogs / Go Git Service</a>
          <li>Next: <a href="pihole/index.html" title="nächstes Kapitel">pi-hole</a>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Los" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019 Markus Heiser.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>